/*! For license information please see 691.5df060f2.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkwagehire_frontend=self.webpackChunkwagehire_frontend||[]).push([[691],{1691:(e,s,r)=>{r.r(s),r.d(s,{default:()=>j});var a=r(5043),t=r(5016),l=r(9621),c=r(7463),i=r(8646),n=r(5087),d=r(8298),o=r(5327),x=r(9292),m=r(2489),h=r(9855),u=r(4459),y=r(7118),g=r(5475),p=r(579);const j=()=>{const{isAdmin:e}=(0,t.A)(),[s,r]=(0,a.useState)([]),[j,f]=(0,a.useState)(!0),[v,N]=(0,a.useState)(""),[w,b]=(0,a.useState)("");(0,a.useEffect)(()=>{e()?A():f(!1)},[e]);const A=async()=>{try{const e=await l.Ay.get("/users");r(e.data.users)}catch(e){console.error("Error fetching users:",e)}finally{f(!1)}},k=s.filter(e=>{const s=e.name.toLowerCase().includes(v.toLowerCase())||e.email.toLowerCase().includes(v.toLowerCase()),r=!w||e.role===w;return s&&r}),C=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"user":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return e()?j?(0,p.jsx)(c.A,{message:"Loading users...",icon:y.A}):(0,p.jsxs)("div",{className:"space-y-6",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Manage Users"}),(0,p.jsx)("p",{className:"text-gray-600",children:"Manage system users and their roles"})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)(m.A,{className:"w-5 h-5 text-primary-600"}),(0,p.jsx)("span",{className:"text-sm font-medium text-primary-600",children:"Admin Access"})]})]}),(0,p.jsx)("div",{className:"bg-white rounded-xl shadow-lg border-0 p-6",children:(0,p.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)(x.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,p.jsx)("input",{type:"text",placeholder:"Search users...",value:v,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),(0,p.jsx)("div",{className:"flex items-center space-x-4",children:(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)(d.A,{className:"w-4 h-4 text-gray-400"}),(0,p.jsxs)("select",{value:w,onChange:e=>b(e.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,p.jsx)("option",{value:"",children:"All Roles"}),(0,p.jsx)("option",{value:"admin",children:"Admin"}),(0,p.jsx)("option",{value:"user",children:"User"})]})]})})]})}),(0,p.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border-0",children:[(0,p.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,p.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:[k.length," user",1!==k.length?"s":""]})}),0===k.length?(0,p.jsxs)("div",{className:"p-8 text-center",children:[(0,p.jsx)(y.A,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:v||w?"No users found":"No users yet"}),(0,p.jsx)("p",{className:"text-gray-600",children:v||w?"Try adjusting your search or filter criteria.":"Users will appear here once they register."})]}):(0,p.jsx)("div",{className:"divide-y divide-gray-200",children:k.map(e=>(0,p.jsx)("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsx)("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:(0,p.jsx)(u.A,{className:"w-6 h-6 text-primary-600"})}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,p.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600 mt-1",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(o.A,{className:"w-4 h-4 mr-1"}),(0,p.jsx)("span",{children:e.email})]}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(i.A,{className:"w-4 h-4 mr-1"}),(0,p.jsxs)("span",{children:["Joined ",new Date(e.created_at).toLocaleDateString()]})]})]})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsxs)("select",{value:e.role,onChange:a=>(async(e,a)=>{try{await l.Ay.put(`/admin/users/${e}/role`,{role:a}),r(s.map(s=>s.id===e?{...s,role:a}:s)),alert("User role updated successfully")}catch(t){console.error("Error updating user role:",t),alert("Failed to update user role")}})(e.id,a.target.value),className:"text-sm border border-gray-300 rounded-md px-3 py-1 focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,p.jsx)("option",{value:"user",children:"User"}),(0,p.jsx)("option",{value:"admin",children:"Admin"})]}),(0,p.jsx)("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${C(e.role)}`,children:e.role.charAt(0).toUpperCase()+e.role.slice(1)}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsx)(g.N_,{to:`/users/${e.id}`,className:"p-2 text-gray-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg transition-colors",title:"View Details",children:(0,p.jsx)(n.A,{className:"w-4 h-4"})}),(0,p.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user?"))try{await l.Ay.delete(`/admin/users/${e}`),r(s.filter(s=>s.id!==e)),alert("User deleted successfully")}catch(a){console.error("Error deleting user:",a),alert("Failed to delete user")}})(e.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:(0,p.jsx)(h.A,{className:"w-4 h-4"})})]})]})]})},e.id))})]})]}):(0,p.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,p.jsxs)("div",{className:"text-center",children:[(0,p.jsx)(m.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,p.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Access Denied"}),(0,p.jsx)("p",{className:"text-gray-600",children:"You need admin privileges to manage users."})]})})}},5087:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5327:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},7118:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8298:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},8646:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9292:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9855:(e,s,r)=>{r.d(s,{A:()=>a});const a=(0,r(1639).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}}]);
//# sourceMappingURL=691.5df060f2.chunk.js.map